<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="pano_product">
 <typeAlias alias="productInfo" type="com.focus3d.pano.model.ProductInfo" />
 <typeAlias alias="product" type="com.focus3d.pano.model.Product" />

	<resultMap class="product" id="baseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 25 11:02:32 CST 2017.
    -->
    <result column="SN" jdbcType="BIGINT" property="sn" />
    <result column="ID" jdbcType="VARCHAR" property="id" />
    <result column="NAME" jdbcType="VARCHAR" property="name" />
    <result column="BRAND" jdbcType="VARCHAR" property="brand" />
    <result column="PRICE" jdbcType="DECIMAL" property="price" />
    <result column="STATUS" jdbcType="INTEGER" property="status" />
    <result column="SUMMARY" jdbcType="VARCHAR" property="summary" />
    <result column="LEFT_IMG_SN" jdbcType="BIGINT" property="leftImgSn" />
    <result column="DOWN_IMG_SN" jdbcType="BIGINT" property="downImgSn" />
    <result column="FULL_IMG_SN" jdbcType="BIGINT" property="fullImgSn" />
    <result column="BANNER_IMG_SN" jdbcType="BIGINT" property="bannerImgSn" />
    <result column="TYPE_SN" jdbcType="BIGINT" property="typeSn" />
    <result column="FUNC_SN" jdbcType="BIGINT" property="funcSn" />
    <result column="SPACE_SN" jdbcType="BIGINT" property="spaceSn" />
    <result column="STYLE_SN" jdbcType="BIGINT" property="styleSn" />
    <result column="LENGTH" jdbcType="INTEGER" property="length" />
    <result column="WIDE" jdbcType="INTEGER" property="wide" />
    <result column="HEIGHT" jdbcType="INTEGER" property="height" />
    <result column="MATERIAL_NAME" jdbcType="VARCHAR" property="materialName" />
    <result column="MATERIAL_IMG_SN" jdbcType="BIGINT" property="materialImgSn" />
    <result column="FABRIC_NAME" jdbcType="VARCHAR" property="fabricName" />
    <result column="FABRIC_IMG_SN" jdbcType="BIGINT" property="fabricImgSn" />
    <result column="COLOR" jdbcType="VARCHAR" property="color" />
    <result column="MODEL" jdbcType="VARCHAR" property="model" />
    <result column="CAPACITY" jdbcType="VARCHAR" property="capacity" />
    <result column="REMARK" jdbcType="VARCHAR" property="remark" />
    <result column="ADDER_SN" jdbcType="BIGINT" property="adderSn" />
    <result column="ADDER_NAME" jdbcType="VARCHAR" property="adderName" />
    <result column="ADD_TIME" jdbcType="TIMESTAMP" property="addTime" />
    <result column="UPDATER_SN" jdbcType="BIGINT" property="updaterSn" />
    <result column="UPDATER_NAME" jdbcType="VARCHAR" property="updaterName" />
    <result column="UPDATE_TIME" jdbcType="TIMESTAMP" property="updateTime" />
    
    <result column="material_color" jdbcType="VARCHAR" property="materialColor" />
    <result column="fabric_color" jdbcType="VARCHAR" property="fabricColor"/>
    <result column="lr" jdbcType="VARCHAR" property="lr"/>
    <result column="lr_round" jdbcType="VARCHAR" property="lrRound"/>
    <result column="full_img" jdbcType="VARCHAR" property="fullImg"/>
    <result column="left_img" jdbcType="VARCHAR" property="leftImg"/>
    <result column="down_img" jdbcType="VARCHAR" property="downImg"/>
    <result column="material_img" jdbcType="VARCHAR" property="materialImg"/>
    <result column="fabric_img" jdbcType="VARCHAR" property="fabricImg"/>
    <result column="workmanship" jdbcType="VARCHAR" property="workManShip"/>
  </resultMap>
	
	<select id="getAllProductInfo"  resultClass="productInfo" parameterClass="java.util.Map">
	  select p.SN, p.ID, p.NAME, p.BRAND, p.PRICE, p.STATUS, p.SUMMARY, p.LEFT_IMG_SN as leftImgSn, p.DOWN_IMG_SN as downImgSn,
  p.FULL_IMG_SN as fullImgSn, p.BANNER_IMG_SN as bannerImgSn, p.TYPE_SN as typeSn, p.FUNC_SN as funcSn, p.SPACE_SN as spaceSn,
	     p.STYLE_SN as styleSn, p.LENGTH, p.WIDE, p.HEIGHT, p.MATERIAL_NAME as materialName,
      p.MATERIAL_IMG_SN as materialImgSn, p.FABRIC_NAME as fabricName, p.FABRIC_IMG_SN as fabricImgSn, p.COLOR, p.MODEL, 
      p.CAPACITY, p.REMARK, p.ADDER_SN as adderSn, p.ADDER_NAME as adderName,p.ADD_TIME as addTime1, p.UPDATER_SN as updaterSn, 
      p.UPDATER_NAME as updaterName, p.UPDATE_TIME as updateTime1,p.dimension,p.venderName,
      p.workManShip,p.LR,p.lr_round as lrRound, p.material_color as materialColor,p.fabric_color as fabricColor,
    p.full_img as fullImg,p.left_img as leftImg,p.down_img as downImg,p.material_img as materialImg,p.fabric_img as fabricImg,p.venderName
    ,pt.NAME as typeName,pf.NAME as funcName,ps.NAME as styleName
    from pano_product p left JOIN pano_product_type pt on p.type_sn=pt.sn left join pano_product_func pf on p.FUNC_SN=pf.SN
LEFT JOIN pano_project_style ps on p.STYLE_SN=ps.sn
 <dynamic prepend="WHERE ">      
    <isNotEmpty prepend="AND" property="id"> p.id like concat('%',#id#,'%')</isNotEmpty>  
    <isNotEmpty prepend="AND" property="styleSn"> p.style_sn = #styleSn#</isNotEmpty>  
    <isNotEmpty prepend="AND" property="funcSn"> p.func_sn = #funcSn#</isNotEmpty>  
  </dynamic>  
  <dynamic prepend="ORDER BY">  
        <isNotEmpty property="orderSql">     
            $orderSql$     
        </isNotEmpty>  
    </dynamic>     
    <dynamic prepend=" LIMIT ">  
        <isNotEmpty property="startNum">  
            #startNum#  
        </isNotEmpty>  
        <isNotEmpty  property="size">  
            ,#size#  
        </isNotEmpty>  
   </dynamic>  

  	</select>
	
	<select id="getProductBySn" resultClass="product" parameterClass="java.lang.String">
	    select SN, ID, NAME, BRAND, PRICE, STATUS, SUMMARY, LEFT_IMG_SN as leftImgSn, DOWN_IMG_SN as downImgSn,
  FULL_IMG_SN as fullImgSn, BANNER_IMG_SN as bannerImgSn, TYPE_SN as typeSn, FUNC_SN as funcSn, SPACE_SN as spaceSn,
	     STYLE_SN as styleSn, LENGTH, WIDE, HEIGHT, MATERIAL_NAME as materialName,
      MATERIAL_IMG_SN as materialImgSn, FABRIC_NAME as fabricName, FABRIC_IMG_SN as fabricImgSn, COLOR, MODEL, 
      CAPACITY, REMARK, ADDER_SN as adderSn, ADDER_NAME as adderName,ADD_TIME as addTime1, UPDATER_SN as updaterSn, 
      UPDATER_NAME as updaterName, UPDATE_TIME as updateTime1,dimension,venderName,
      workManShip,LR,lr_round as lrRound, material_color as materialColor,fabric_color as fabricColor,
    full_img as fullImg,left_img as leftImg,down_img as downImg,material_img as materialImg,fabric_img as fabricImg
    from pano_product
    where SN = #sn:BIGINT#
	</select>
	
	<!-- 查产品 -->
	<select id="getProductDetailBySn" resultClass="productInfo" parameterClass="java.lang.String"> 
	 select p.SN, p.ID, p.NAME, p.BRAND, p.PRICE, p.STATUS, p.SUMMARY, p.LEFT_IMG_SN as leftImgSn, p.DOWN_IMG_SN as downImgSn,
  p.FULL_IMG_SN as fullImgSn, p.BANNER_IMG_SN as bannerImgSn, p.TYPE_SN as typeSn, p.FUNC_SN as funcSn, p.SPACE_SN as spaceSn,
	     p.STYLE_SN as styleSn, p.LENGTH, p.WIDE, p.HEIGHT, p.MATERIAL_NAME as materialName,
      p.MATERIAL_IMG_SN as materialImgSn, p.FABRIC_NAME as fabricName, p.FABRIC_IMG_SN as fabricImgSn, p.COLOR, p.MODEL, 
      p.CAPACITY, p.REMARK, p.ADDER_SN as adderSn, p.ADDER_NAME as adderName,p.ADD_TIME as addTime1, p.UPDATER_SN as updaterSn, 
      p.UPDATER_NAME as updaterName, p.UPDATE_TIME as updateTime1,p.dimension,p.venderName,
      p.workManShip,p.LR,p.lr_round as lrRound, p.material_color as materialColor,p.fabric_color as fabricColor,
    p.full_img as fullImg,p.left_img as leftImg,p.down_img as downImg,p.material_img as materialImg,p.fabric_img as fabricImg,p.venderName
    ,pt.NAME as typeName,pf.NAME as funcName,ps.NAME as styleName
    from pano_product p left JOIN pano_product_type pt on p.type_sn=pt.sn left join pano_product_func pf on p.FUNC_SN=pf.SN
LEFT JOIN pano_project_style ps on p.STYLE_SN=ps.sn
	   where p.SN = #sn:BIGINT#
	</select>
	
	<!-- 功能 -->
	
	<select id="getAllProFunc" resultClass="com.focus3d.pano.model.PanoProductFunc" >
	   select  sn,name from pano_product_func
	</select>
	
	<!-- 风格-->
	<select id="getAllProStyle" resultClass="com.focus3d.pano.model.pano_project_style" >
	  select sn,name from pano_project_style
	</select>
	
	<!-- 分类 -->
      <select id="getAllProType" resultClass="com.focus3d.pano.model.PanoProductType" >
       select sn,name from pano_product_type
      </select>
	
	<!-- 添加 -->
	<insert id="insert" parameterClass="product">
	
	   insert into pano_product(
	  
	   id,
	   name,
	   brand,price,status,summary,length,wide,height,workmanship,lr,lr_round,material_name,material_color,
	   fabric_name,fabric_color,LEFT_IMG_SN, DOWN_IMG_SN,
      FULL_IMG_SN,TYPE_SN, FUNC_SN, SPACE_SN, STYLE_SN, ADDER_SN,UPDATER_SN,
      full_img,left_img,down_img,material_img,fabric_img,dimension,vendername
      ) values(
	 #id#,#name#,#brand#,#price#,#status#,#summary#,#length#,#wide#,#height#,#workManShip#,#lr#,#lrRound#,
	 #materialName#,#materialColor#,#fabricName#,#fabricColor#,
	 #leftImgSn:BIGINT#, #downImgSn:BIGINT#, #fullImgSn:BIGINT#, 
	 #typeSn:BIGINT#, #funcSn:BIGINT#, #spaceSn:BIGINT#, #styleSn:BIGINT#,#adderSn:BIGINT#,#updaterSn:BIGINT#
	 ,#fullImg#,#leftImg#,#downImg#,#materialImg#,#fabricImg#,#dimension#,#venderName#
	   )

	</insert>
	
	<!--删除  -->
	<delete id="deleteProductBySn" parameterClass="java.lang.String">
	  delete from pano_product where  sn=#sn#
	</delete>
	<!-- 修改 -->
	 <update id="updateProduct" parameterClass="product">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 25 11:02:32 CST 2017.
    -->
    update pano_product
    set ID = #id:VARCHAR#,
      NAME = #name:VARCHAR#,
      BRAND = #brand:VARCHAR#,
      PRICE = #price:DECIMAL#,
      STATUS = #status:INTEGER#,
      SUMMARY = #summary:VARCHAR#,
      LEFT_IMG_SN = #leftImgSn:BIGINT#,
      DOWN_IMG_SN = #downImgSn:BIGINT#,
      FULL_IMG_SN = #fullImgSn:BIGINT#,
      BANNER_IMG_SN = #bannerImgSn:BIGINT#,
      TYPE_SN = #typeSn:BIGINT#,
      FUNC_SN = #funcSn:BIGINT#,
      SPACE_SN = #spaceSn:BIGINT#,
      STYLE_SN = #styleSn:BIGINT#,
      LENGTH = #length:INTEGER#,
      WIDE = #wide:INTEGER#,
      HEIGHT = #height:INTEGER#,
      MATERIAL_NAME = #materialName:VARCHAR#,
      MATERIAL_IMG_SN = #materialImgSn:BIGINT#,
      FABRIC_NAME = #fabricName:VARCHAR#,
      FABRIC_IMG_SN = #fabricImgSn:BIGINT#,
      COLOR = #color:VARCHAR#,
      MODEL = #model:VARCHAR#,
      CAPACITY = #capacity:VARCHAR#,
      REMARK = #remark:VARCHAR#,
      ADDER_SN = #adderSn:BIGINT#,
      ADDER_NAME = #adderName:VARCHAR#,
      ADD_TIME = #addTime:TIMESTAMP#,
      UPDATER_SN = #updaterSn:BIGINT#,
      UPDATER_NAME = #updaterName:VARCHAR#,
      UPDATE_TIME = #updateTime:TIMESTAMP#,
      material_color=#materialColor#,
      fabric_color=#fabricColor#,
      lr=#lr#,
      lr_round=#lrRound#,
      workmanship=#workManShip#,
      full_img=#fullImg#,
      left_Img=#leftImg#,
      down_img=#downImg#,
      material_img=#materialImg#,
      fabric_img=#fabricImg#,
      dimension=#dimension#,
      vendername=#venderName#
    where SN = #sn:BIGINT#
  </update>
	
</sqlMap>